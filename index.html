<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Demo Dashboard â€¢ HapTID</title>
        <!-- <base href="/HapTID/"> -->
        <meta name="author" content="Louis Badr">
        <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="./css/style.css">
    </head>
    <body>
        <div id="info_popup">
            <button id="info_close_button" onclick="document.getElementById('info_popup').style.display='none'"><span class="material-icons">close</span></button>
            <h2>How to set up your device</h2>
            <ol>
                <li>Connect a vibration motor or speaker on each of the 6 ports of the HapTID device</li>
                <li>Plug the HapTID device into a power source (power bank or wall outlet) via USB-C (5V, min 2A) - A red LED will light up</li>
                <li>Connect the HapTID device to your PC via micro-USB</li>
                <li>Press the power button of the HapTID device - A green LED will light up and you should feel a click on each output</li>
                <li>If the dashboard firmware isn't installed on your device, you can download it <a id="dl_button" href="./dashboard_firmware/dashboard_firmware.ino" download>here</a> and flash it using the Arduino IDE</li>
            </ol>
            <br>
            <h2>How to use the dashboard</h2>
            <ol>
                <li>Click on the CONNECT button at the top left of the dashboard and select the COM port of the HapTID device (works on Chrome, Edge, and Opera)</li>
                <li>Select a signal type or paste your own signal (13-bit, 8kHz) in the text area of the CUSTOM tab and adjust the parameters with the sliders</li>
                <li>Click on a number to select the motor you want to send the signal to</li>
                <li>Click on the LOAD button to send the signal to the HapTID device and wait for the graph to update (it may take a moment)</li>
                <li>Click on the START button to start the signal playback, it will play in a loop until you click on the STOP button</li>
                <li>If there is any issue, press the power button of the HapTID device to turn it off and on again, reload the page and press the CONNECT button again</li>
            </ol>
        </div>
        <div class="dashboard__container">
            <button id="serial_connect_button" onclick="listSerial()">CONNECT</button>
            <button id="info_button" onclick="document.getElementById('info_popup').style.display='block'"><span class="material-icons">question_mark</span></button>
            <h1> HapTID Demo Dashboard</h1>
            <div class="dashboard__header__buttons">
                <button class="tablink active" onclick="openTab(event, 'sine')">SINE</button>
                <button class="tablink" onclick="openTab(event, 'noise')">NOISE</button>
                <button class="tablink" onclick="openTab(event, 'clicks')">CLICKS</button>
                <button class="tablink" onclick="openTab(event, 'custom')">CUSTOM</button>
            </div>
            <div id="sine" class="tab">
                <div class="sliders__container">
                    <p>Volume</p>
                    <input type="range" min="0.01" max="100" value="5" step="0.01" class="slider" id="sineVolumeSlider">
                    <p><span id="sineVolumeOutput"></span>%</p>
                    <p>Frequency</p>
                    <input type="range" min="1" max="1000" value="150" class="slider" id="sineFrequencySlider">
                    <p><span id="sineFrequencyOutput"></span>Hz</p>
                </div>
            </div>
            <div id="noise" class="tab">
                <div class="sliders__container">
                    <p>Volume</p>
                    <input type="range" min="0.01" max="100" value="5" step="0.01" class="slider" id="noiseVolumeSlider">
                    <p><span id="noiseVolumeOutput"></span>%</p>
                </div>
            </div>
            <div id="clicks" class="tab">
                <div class="sliders__container">
                    <p>Volume</p>
                    <input type="range" min="0.01" max="100" value="100" step="0.01" class="slider" id="clicksVolumeSlider">
                    <p><span id="clicksVolumeOutput"></span>%</p>
                    <p>Number of clicks</p>
                    <input type="range" min="1" max="10" value="3" class="slider" id="clicksNumberSlider">
                    <p><span id="clicksNumberOutput"></span></p>
                    <p>Spacing between clicks</p>
                    <input type="range" min="1" max="1000" value="50" class="slider" id="clicksSpacingSlider">
                    <p><span id="clicksSpacingOutput"></span>ms</p>
                </div>
            </div>
            <div id="custom" class="tab">
                <input type="text" id="array_input_field" placeholder="Enter values separated by commas">
            </div>
            <div class="dashboard__header__buttons">
                <button class="motortab active" onclick='selectMotor(event, "1")'>1</button>
                <button class="motortab"onclick='selectMotor(event, "2")'>2</button>
                <button class="motortab"onclick='selectMotor(event, "3")'>3</button>
                <button class="motortab"onclick='selectMotor(event, "4")'>4</button>
                <button class="motortab"onclick='selectMotor(event, "5")'>5</button>
                <button class="motortab"onclick='selectMotor(event, "6")'>6</button>
            </div>
            <div class="dashboard__footer__buttons">
                <button id="load_button">LOAD</button>
                <button id="start_button">START</button>
                <button id="stop_button">STOP</button>
            </div>
            <div id="myPlot"></div>
        </div>
        <script src="./js/constants.js"></script>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <script src="./js/plot.js"></script>
        <script src="./js/tabs.js"></script>
        <script src="./js/serial.js"></script>
    </body>
</html>